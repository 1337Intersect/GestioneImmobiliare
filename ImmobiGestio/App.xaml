<Application x:Class="ImmobiGestio.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:ImmobiGestio.Converters"
             StartupUri="MainWindow.xaml"
             Startup="Application_Startup"
             Exit="Application_Exit">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Theme Dictionaries -->
                <ResourceDictionary Source="Styles/LightTheme.xaml"/>
                <ResourceDictionary Source="Styles/DarkTheme.xaml"/>
                <ResourceDictionary Source="Styles/ModernStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <!-- Converters - Only include existing ones -->
            <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            <converters:DecimalToStringConverter x:Key="DecimalToStringConverter"/>
            <converters:IntToStringConverter x:Key="IntToStringConverter"/>
            <converters:NullableIntToStringConverter x:Key="NullableIntToStringConverter"/>
            <converters:NullableDecimalToStringConverter x:Key="NullableDecimalToStringConverter"/>
            <converters:NumericStringConverter x:Key="NumericStringConverter"/>
            <!--<converters:DateTimeToStringConverter x:Key="DateTimeToStringConverter"/>
            <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>-->

            <!-- FALLBACK THEME RESOURCES (in case theme files fail to load) -->
            <SolidColorBrush x:Key="BackgroundBrush" Color="#FAFAFA"/>
            <SolidColorBrush x:Key="SurfaceBrush" Color="#FFFFFF"/>
            <SolidColorBrush x:Key="PrimaryBrush" Color="#2196F3"/>
            <SolidColorBrush x:Key="PrimaryDarkBrush" Color="#1976D2"/>
            <SolidColorBrush x:Key="PrimaryLightBrush" Color="#E3F2FD"/>
            <SolidColorBrush x:Key="AccentBrush" Color="#FF4081"/>
            <SolidColorBrush x:Key="SuccessBrush" Color="#4CAF50"/>
            <SolidColorBrush x:Key="SuccessLightBrush" Color="#E8F5E8"/>
            <SolidColorBrush x:Key="WarningBrush" Color="#FF9800"/>
            <SolidColorBrush x:Key="WarningLightBrush" Color="#FFF3E0"/>
            <SolidColorBrush x:Key="ErrorBrush" Color="#F44336"/>
            <SolidColorBrush x:Key="PurpleBrush" Color="#9C27B0"/>
            <SolidColorBrush x:Key="PurpleLightBrush" Color="#F3E5F5"/>
            <SolidColorBrush x:Key="TextPrimary" Color="#212121"/>
            <SolidColorBrush x:Key="TextSecondary" Color="#757575"/>
            <SolidColorBrush x:Key="TextMuted" Color="#999999"/>
            <SolidColorBrush x:Key="BorderBrush" Color="#E0E0E0"/>
            <SolidColorBrush x:Key="HoverBrush" Color="#F5F5F5"/>

            <!-- FALLBACK SHADOW EFFECTS -->
            <DropShadowEffect x:Key="CardShadow"
                              Color="#000000"
                              Opacity="0.08"
                              ShadowDepth="4"
                              BlurRadius="16"/>

            <DropShadowEffect x:Key="CardShadowHover"
                              Color="#000000"
                              Opacity="0.15"
                              ShadowDepth="8"
                              BlurRadius="24"/>

            <!-- FALLBACK BUTTON STYLES -->
            <Style x:Key="ModernButtonPrimary" TargetType="Button">
                <Setter Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="16,10"/>
                <Setter Property="FontWeight" Value="Medium"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    CornerRadius="8"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource PrimaryDarkBrush}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="ModernButtonSecondary" TargetType="Button">
                <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
                <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
                <Setter Property="Padding" Value="16,10"/>
                <Setter Property="FontWeight" Value="Medium"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="8"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                                    <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- FALLBACK ANIMATIONS -->
            <Storyboard x:Key="FadeIn">
                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                               From="0.8" To="1" Duration="0:0:0.2"/>
            </Storyboard>

            <!-- ANIMATED CONTENT CONTROL -->
            <Style x:Key="AnimatedContentControl" TargetType="ContentControl">
                <Setter Property="RenderTransform">
                    <Setter.Value>
                        <TranslateTransform Y="0"/>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard Storyboard="{StaticResource FadeIn}"/>
                    </EventTrigger>
                </Style.Triggers>
            </Style>

            <!-- SIDEBAR BUTTON STYLE -->
            <Style x:Key="SidebarButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Foreground" Value="{DynamicResource TextSecondary}"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Height" Value="44"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="Padding" Value="20,0"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    Margin="8,1"
                                    CornerRadius="6">
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource HoverBrush}"/>
                                    <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

        </ResourceDictionary>
    </Application.Resources>
</Application>